<div class="wrapper" ng-init="configureRoom()">
  <div id="appError" class="notification" ui-show="errorMessage">{{errorMessage}}</div>
  <div id="message" class="notification" ui-show="message">{{message}}</div>

  <div id="roomNumber">Room: <strong>{{roomId}}</strong></div>

  <section id="cardPanel" role="navigation">
    <div ng-show="voter">
      <h2>Estimate</h2>
      <ul class="cards">
        <li ng-repeat="card in cards" ng-click="vote(card)" class="card mine-{{card==myVote}}">
          <div>{{card}}</div>
        </li>
      </ul>
    </div>
    <div ng-hide="voter">
      <p>You have chosen to simply observe this session. Enjoy!</p>
    </div>
    <span class="vote-item"><a href="#menu" class="cardPanel-button">Vote</a></span>
  </section>

  <section id="votePanel" role="main">
    <h2>Votes <span class="sub">Humans: {{humanCount}}, Voters: <span class="label">{{voterCount}}</span></span></h2>
    
    <ul class="cards {{votingState}}" style="clear: both;">
      <li ng-repeat="vote in votes" ng-click="unvote(vote.sessionId)" class="card mine-{{vote.sessionId==sessionId}}">
        <div class="vote">{{vote.visibleVote}}</div>
        <div class="hidden">x</div>
      </li>
    </ul>
  </section>

  <section id="adminPanel" ng-switch on="showAdmin" role="complementary">
    <h2>Settings</h2>
    <hr />
    <div ng-switch-when="true">
      <p>Choose card pack:</p>
      <label><input type="radio" ng-model="cardPack" ng-change="setCardPack(cardPack)" value="fib"> Fibonacci</label>
      <label><input type="radio" ng-model="cardPack" ng-change="setCardPack(cardPack)" value="seq"> Sequential</label>
      <label><input type="radio" ng-model="cardPack" ng-change="setCardPack(cardPack)" value="tshirt"> T-Shirt</label>
      <hr />
      <button ng-click="resetVote()" class="btn">Reset the vote</button>
    </div>
    <p><label>I am a <strong>voter</strong>: <input type="checkbox" ng-model="voter" ng-change="toggleVoter()" /></label></p>
    <hr />
    <span class="vote-item"><a href="#extra" class="sidebar-button">Settings</a></span>
  </section>

</div>
  <script>
    var showCardPanel = function() {
      $('body').removeClass("active-settings").toggleClass("active-cardPanel");
    }

    var showSettings = function() {
      $('body').removeClass("active-cardPanel").toggleClass("active-settings");
    }

    var resizer = function () {
      var size = window.getComputedStyle(document.body,':after').getPropertyValue('content');
      if (size == 'widescreen') {
        $("body").removeClass().addClass("three-column");
      } else if (size == 'narrow'){
        $("body").removeClass().addClass("narrow-screen");
      } else {
        $("body").removeClass().addClass("small-screen");
      }
    }

    // add/remove classes everytime the window resize event fires
    $(window).resize(function() { resizer(); }); 

    $(document).ready(function(){
      resizer();
      $('html').removeClass('no-js').addClass('js');

      // Toggle for nav menu
      $('.cardPanel-button').click(function() {
        showCardPanel();
        return false;
      }); 
      // Toggle for sidebar
      $('.sidebar-button').click(function() {
        showSettings();
        return false;
      });

    });
  </script>
